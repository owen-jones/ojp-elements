
<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <title>Ojp Image</title>

  <script type="module" src="../../build/ojp-elements.esm.js"></script>
  <script nomodule src="../../build/ojp-elements.js"></script>
  <!--    Needs to import the global stylesheet-->
  <link rel='stylesheet' href='../../build/ojp-elements.css'>

  <style>
    body {
      margin: 0;
    }

    .container {
      position: relative;
      padding-top: 40px;
      height: 100%;
    }

    textarea {
      background-color: #111;
      border: 0;
      color: #fafaff;
      font-family: Monospace;
      font-size: 14px;
      margin: 20px;
      padding: 20px 20px 0px 20px;
      resize: none;
      width: calc(100% - 100px);
    }

    hr {
      margin-block: 40px;
    }
  </style>
</head>
<body>
<div class="container">
  <ojp-row>
    <ojp-col span="12">
      <h2>Ojp Image - intrinsic ratio</h2>
      <textarea rows="7" disabled>
        <ojp-image
          class="my-class"
          src="../../assets/placeimg_1000_500_nature.jpg"
          alt="Descriptive text"
        ></ojp-image>
      </textarea>
      <ojp-image
        class="my-class"
        src="../../assets/placeimg_1000_500_nature.jpg"
        alt="Descriptive text"
      ></ojp-image>

      <hr>

      <h2>Ojp Image - 1:1 ratio</h2>
      <textarea rows="8" disabled>
        <ojp-image
          class="my-class"
          src="../../assets/placeimg_1000_500_nature.jpg"
          alt="Descriptive text"
          ratio="1"
        ></ojp-image>
      </textarea>

      <ojp-image
        class="my-class"
        src="../../assets/placeimg_1000_500_nature.jpg"
        alt="Descriptive text"
        ratio="1"
      ></ojp-image>

      <hr>

      <h2>Ojp Image with different device images</h2>
      <textarea rows="18" disabled>
        <ojp-image
          class="my-class"
          src="https://via.placeholder.com/2000x800?text=Original+2000x800"
          alt="Descriptive text"
          sources='[
            {
              "media":"(max-width: 599px)",
              "srcset":"https://via.placeholder.com/700x600?text=Small+700x600"
            },
            {
              "media":"(min-width: 600px) and (max-width: 1200px)",
              "srcset":"https://via.placeholder.com/1000x500?text=Medium+1000x500"
            }
           ]'
        >
        </ojp-image>
      </textarea>
      <ojp-image
        id="my-resp-image"
        class="my-class"
        src="https://via.placeholder.com/2000x800?text=Original+2000x800"
        alt="Descriptive text"
        sources='[
          {
            "media":"(max-width: 599px)",
            "srcset":"https://via.placeholder.com/700x600?text=Small+700x600"
          },
          {
            "media":"(min-width: 600px) and (max-width: 1200px)",
            "srcset":"https://via.placeholder.com/1000x500?text=Medium+1000x500"
          }
         ]'
        >

      </ojp-image>

      <hr>

      <div style="height: 300vh; display: flex; padding-top: 100px;">This space intentionally blank to move images lower down to demonstrate lazy loading...</div>

      <h2>Ojp Image lazy loads by default</h2>
      <textarea rows="15" disabled>
        <ojp-image
          class="my-class"
          src="https://via.placeholder.com/400/A020F0/"
          alt="Descriptive text"'
        ></ojp-image>

        --- OR ---

        <ojp-image
          class="my-class"
          src="https://via.placeholder.com/400/A020F0/"
          alt="Descriptive text"'
          lazy="true"
        ></ojp-image>
      </textarea>

      <ojp-image
        id="my-image"
        class="my-class"
        src="https://via.placeholder.com/400/A020F0/"
        alt="Descriptive text"
        lazy="true"
      ></ojp-image>

      <hr>

      <h2>Ojp Image - Eager loading (not lazy)</h2>
      <textarea rows="7" disabled>
        <ojp-image
          class="my-class"
          src="https://via.placeholder.com/400/0000FF/"
          alt="Descriptive text"'
          lazy="false"
        ></ojp-image>
      </textarea>
      <ojp-image
        id="my-broken-image"
        class="my-class"
        alt="Descriptive text"
        lazy="false"
      ></ojp-image>
<!--        src="https://via.placeholder.com/400/0000FF/"-->

      <hr>



    </ojp-col>
  </ojp-row>
  <br><br>
</div>
</body>

<script>
  // Project developer can listen for the visibility of the element in the viewport
  const myImage = document.querySelector('#my-image');
  myImage.addEventListener('elementIsVisibleEvent', event => {
    console.log('My image is now visible');
    console.log('IntersectionObserverEntry', event.detail);
  });
  myImage.addEventListener('elementIsInvisibleEvent', event => {
    console.log('My image is now invisible');
    console.log('IntersectionObserverEntry', event.detail);
  });
  // Project developer can listen for the successful loading of the image
  myImage.addEventListener('imageLoadedEvent', event => {
    console.log('My image loaded', event);
  });

  // Project developer can listen for an image loading error
  const myBrokenImage = document.querySelector('#my-broken-image');
  myBrokenImage.addEventListener('imageFailedToLoadEvent', event => {
    console.error('My image failed to load', event);
  });


  // Project developer can listen for an image loading error
  const myRespImage = document.querySelector('#my-resp-image');
  myRespImage.addEventListener('imageSourceChangedEvent', event => {
    console.log('My image source changed', event);
  });
</script>
</html>
