
<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <title>Ojp Image</title>

  <script type="module" src="../../build/ojp-elements.esm.js"></script>
  <script nomodule src="../../build/ojp-elements.js"></script>
  <!--    Needs to import the global stylesheet-->
  <link rel='stylesheet' href='../../build/ojp-elements.css'>

  <style>
    body {
      margin: 0;
    }

    .test {
      width: 100px;
    }
    .container {
      position: relative;
      padding-top: 40px;
      height: 100%;
      background-color: lavender;
    }

    textarea {
      background-color: #111;
      border: 0;
      color: #fafaff;
      font-family: Monospace;
      font-size: 14px;
      margin: 20px;
      padding: 20px 20px 0px 20px;
      resize: none;
      width: calc(100% - 100px);
    }

    .column {
      background-color: white;
    }

  </style>
</head>
<body>
<div class="container">
  <ojp-row>
    <ojp-col class="column" span="8" start="3" mspan="12" mstart="0">
      <h1>Ojp Image</h1>
      <p>Project dev can override any ojp-image vars in their style sheet like this:</p>

      <textarea disabled rows="8">
      ojp-image {
        --ojp-image--max-width: 400px; // Default is 100%
        --ojp-image--object-fit: contain; // Default is cover
        --ojp-image--width: 100%; // Default is auto
        --ojp-image--display: inline-block; // Default is block
      }
      </textarea>
    </ojp-col>
  </ojp-row>
  <ojp-row>
    <ojp-col class="column" span="8" start="3" tspan="12" tstart="0" mspan="12" mstart="0">
      <h2>Ojp Image - simple (intrinsic size)</h2>
      <textarea rows="7" disabled>
        <ojp-image
          id="my-image"
          class="my-class"
          src="/assets/placeimg_1000_500_nature.jpg"
          alt="Descriptive text"
        ></ojp-image>
      </textarea>
      <ojp-image
        id="my-image"
        class="my-class"
        src="/assets/placeimg_1000_500_nature.jpg"
        alt="Descriptive text"
      ></ojp-image>

    </ojp-col>
  </ojp-row>

  <ojp-row>
    <ojp-col class="column" span="8" start="3" tspan="12" tstart="0" mspan="12" mstart="0">
      <h2>Ojp Image - simple (set width)</h2>
      <textarea rows="7" disabled>
        <ojp-image
          class="my-class"
          src="/assets/placeimg_1000_500_nature.jpg"
          alt="Descriptive text"
          width="250"
        ></ojp-image>
      </textarea>
      <ojp-image
        class="my-class"
        src="/assets/placeimg_1000_500_nature.jpg"
        alt="Descriptive text"
        width="250"
      ></ojp-image>

    </ojp-col>
  </ojp-row>
  <ojp-row>
    <ojp-col class="column" span="6" start="4" tspan="12" tstart="0" mspan="12" mstart="0">
      <h2>Ojp Image - ratio 1 / 1</h2>
      <textarea rows="7" disabled>
        <ojp-image
          class="my-class
          src="/assets/placeimg_1000_500_nature.jpg"
          alt="Descriptive text"
          ratio="1"
        ></ojp-image>
      </textarea>
      <ojp-image
        id="my-square-image"
        class="my-class"
        src="/assets/placeimg_1000_500_nature.jpg"
        alt="Descriptive text"
        ratio="1"
      ></ojp-image>


    </ojp-col>
  </ojp-row>

  <ojp-row>
    <ojp-col class="column" span="6" start="4" tspan="12" tstart="0" mspan="12" mstart="0">
      <h2>Ojp Image - Change Image Focus (defaults to 'center center')</h2>
      <textarea rows="7" disabled>
        <ojp-image
          class="my-class
          src="/assets/placeimg_1000_500_nature.jpg"
          alt="Descriptive text"
          ratio="1"
          image-focus="top right"
        ></ojp-image>
      </textarea>
      <ojp-image
        id="my-square-image"
        class="my-class"
        src="/assets/placeimg_1000_500_nature.jpg"
        alt="Descriptive text"
        ratio="1"
        image-focus="top right"
      ></ojp-image>


    </ojp-col>
  </ojp-row>

  <ojp-row>
    <ojp-col span="12">

      <h2>Ojp Image: Image size switches based on screen size (same aspect ratios)</h2>
      <textarea rows="18" disabled>
      <ojp-image
        id="my-resp-image"
        class="my-class"
        src="/assets/unsplash__orig.jpg"
        alt="Descriptive text"
        lazy
      >
        <source
          media="(max-width: 599px)"
          srcset="https://via.placeholder.com/700x600?text=Small+700x600"
        >
        <source
          media="(min-width: 600px) and (max-width: 1200px)"
          srcset="https://via.placeholder.com/1000x500?text=Medium+1000x500"
        >
      </ojp-image>
      </textarea>
      <ojp-image
        id="my-resp-image"
        class="my-class test"
        src="/assets/unsplash__orig.jpg"
        alt="Descriptive text"
        lazy
      >
        <source
          media="(max-width: 599px)"
          srcset="https://via.placeholder.com/700x600?text=Small+700x600"
        >
        <source
          media="(min-width: 600px) and (max-width: 1200px)"
          srcset="https://via.placeholder.com/1000x500?text=Medium+1000x500"
        >
      </ojp-image>
      <caption>Current filepath: <span id="image-path" style="color: purple;font-weight: bold;"></span></caption>

    </ojp-col>
    </ojp-row>

    <ojp-row>
      <ojp-col span="12">
      <h2>Ojp Image: Different images and ratios depending on screen size</h2>
      <textarea rows="18" disabled>
        <ojp-image
          id="my-resp-image-2"
          class="my-class"
          src="https://via.placeholder.com/2000x800?text=Original+2000x800"
          alt="Descriptive text"
          >
          <source
            media="(max-width: 599px)"
            srcset="https://via.placeholder.com/700x600?text=Small+700x600"
          >
          <source
            media="(min-width: 600px) and (max-width: 1200px)"
            srcset="https://via.placeholder.com/1000x500?text=Medium+1000x500"
            >
        </ojp-image>
      </textarea>
      <ojp-image
        id="my-resp-image-2"
        class="my-class"
        src="https://via.placeholder.com/2000x800?text=Original+2000x800"
        alt="Descriptive text"
        >
        <source
          media="(max-width: 599px)"
          srcset="https://via.placeholder.com/700x600?text=Small+700x600"
        >
        <source
          media="(min-width: 600px) and (max-width: 1200px)"
          srcset="https://via.placeholder.com/1000x500?text=Medium+1000x500"
          >
      </ojp-image>

      </ojp-col>
    </ojp-row>


  <ojp-row>
    <ojp-col  class="column" span="6" start="4" tspan="12" tstart="0" mspan="12" mstart="0">
      <h2>Ojp Image - ratio 3 / 2 - Different images and ratios depending on screen size</h2>
      <textarea rows="7" disabled>
        <ojp-image
          class="my-class"
          src="/assets/placeimg_1000_500_nature.jpg"
          alt="Descriptive text"
          ratio="3 / 2"
        >
          <source
            media="(max-width: 600px)"
            srcset="/assets/unsplash__400w.jpg"
          >
          <source
            media="(max-width: 1200px)"
            srcset="/assets/unsplash__1000w.jpg"
          >
        </ojp-image>
      </textarea>
      <ojp-image
        class="my-class"
        src="/assets/placeimg_1000_500_nature.jpg"
        alt="Descriptive text"
        ratio="3 / 2"
      >
        <source
          media="(max-width: 600px)"
          srcset="/assets/unsplash__400w.jpg"
        >
        <source
          media="(max-width: 1200px)"
          srcset="/assets/unsplash__1000w.jpg"
        >
      </ojp-image>


    </ojp-col>
  </ojp-row>


  <ojp-row>
      <ojp-col class="column" span="6" start="4" tspan="12" tstart="0" mspan="12" mstart="0">
        <h2>Ojp Image - Demo of broken image with custom fallback/placeholder image</h2>
        <textarea rows="7" disabled>
          <ojp-image
            src="not-a-real-url.jpg"
            alt="Descriptive text"'
          ></ojp-image>
        </textarea>
        <ojp-image
          id="my-broken-image"
          src="not-a-real-url.jpg"
          alt="Descriptive text"
          placeholder="/assets/custom-placeholder.png"
        ></ojp-image>
      </ojp-col>
    </ojp-row>

  <ojp-row>
      <ojp-col  class="column" span="6" start="4" tspan="12" tstart="0" mspan="12" mstart="0">
        <h2>Ojp Image - Demo of missing image with custom fallback/placeholder image</h2>
        <textarea rows="7" disabled>
          <ojp-image
            alt="Descriptive text"
            placeholder="/assets/custom-placeholder.png"
            width="200"
          ></ojp-image>
        </textarea>
        <ojp-image
          alt="Descriptive text"
          placeholder="/assets/custom-placeholder.png"
          width="200"
        ></ojp-image>
      </ojp-col>
    </ojp-row>

    <ojp-row>
      <ojp-col span="12">
        <div style="height: 200vh; display: flex; padding-top: 100px;">This space is intentionally left blank to move images lower down the page to demonstrate browser lazy loading.<br><br>You will get a browser alert when the lazy image below loads.</div>

        <h2>Ojp Image does NOT lazy load by default</h2>
        <textarea rows="25" disabled>
          <ojp-image
            src="https://via.placeholder.com/400/A020F0/"
            alt="Descriptive text"
          ></ojp-image>

          --- OR ---

          <ojp-image
            src="https://via.placeholder.com/400/A020F0/"
            alt="Descriptive text"
            lazy="false"
          ></ojp-image>

        </textarea>
        <ojp-image
          src="https://via.placeholder.com/400/A020F0/"
          alt="Descriptive text"
          lazy="false"
          height="400"
          width="400"
        ></ojp-image>

      </ojp-col>
    </ojp-row>
  <ojp-row>
    <ojp-col span="12">

      <h2>Ojp Image - Lazy Loading</h2>
      <p>Dev can change number of pixels for lazy threshold (default is lazy-offset="300", meaning the image loads when the viewport is 300px before the image)</p>
      <textarea rows="7" disabled>
        <ojp-image
          id="my-lazy-image"
          src="https://via.placeholder.com/400/0000FF/"
          alt="Descriptive text"
          lazy
          lazy-offset="200"
        ></ojp-image>

        <script>
          const myLazyImage = document.querySelector('#my-lazy-image');
            myLazyImage.addEventListener('imageLoadedEvent', event => {
            alert('My lazy image loaded');
          });
        </script>
      </textarea>
      <ojp-image
        id="my-lazy-image"
        src="https://via.placeholder.com/400/0000FF/"
        alt="Descriptive text"
        lazy="true"
      >
        <source
          media="(max-width: 599px)"
          srcset="https://via.placeholder.com/700x600?text=Small+700x600"
        >
        <source
          media="(min-width: 600px) and (max-width: 1200px)"
          srcset="https://via.placeholder.com/1000x500?text=Medium+1000x500"
        >
      </ojp-image>
    </ojp-col>
  </ojp-row>
  <br><br>
</div>
</body>

<script>
  // Project developer can listen for the visibility of the element in the viewport
  const myImage = document.querySelector('#my-image');
  myImage.addEventListener('elementIsVisibleEvent', event => {
    console.log('My image is now visible', event);
  });
  myImage.addEventListener('elementIsInvisibleEvent', event => {
    console.log('My image is now invisible', event);
  });
  // Project developer can listen for the successful loading of the image
  myImage.addEventListener('imageLoadedEvent', event => {
    console.log('My image loaded', event.target);
  });

  // Project developer can listen for an image loading error
  const myBrokenImage = document.querySelector('#my-broken-image');
  myBrokenImage.addEventListener('imageFailedToLoadEvent', event => {
    console.log('My image failed to load', event.target);
  });


  // Project developer can listen for an image loading success
  const myRespImage = document.querySelector('#my-resp-image');
  myRespImage.addEventListener('imageLoadedEvent', event => {
    console.log('------My responsive image loaded', event.detail);
    document.querySelector('#image-path').innerHTML = event.detail;
  });

  const myLazyImage = document.querySelector('#my-lazy-image');
  myLazyImage.addEventListener('imageLoadedEvent', event => {
    console.log('My lazy image loaded', event);
    alert('My lazy image loaded -- ' + event.detail);
  });

  // Listen for image source changing
  myRespImage.addEventListener('imageSourceChangedEvent', event => {
    alert('My image source changed from ' + event.detail.previousSrc + ' to ' + event.detail.currentSrc);
    document.querySelector('#image-path').innerHTML = event.detail.newSrc;
  });


</script>
</html>
